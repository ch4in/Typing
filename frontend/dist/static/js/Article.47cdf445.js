(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Article"],{"02f4":function(t,e,i){var s=i("4588"),n=i("be13");t.exports=function(t){return function(e,i){var r,o,a=String(n(e)),l=s(i),c=a.length;return l<0||l>=c?t?"":void 0:(r=a.charCodeAt(l),r<55296||r>56319||l+1===c||(o=a.charCodeAt(l+1))<56320||o>57343?t?a.charAt(l):r:t?a.slice(l,l+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(t,e,i){"use strict";var s=i("02f4")(!0);t.exports=function(t,e,i){return e+(i?s(t,e).length:1)}},"0a6e":function(t,e,i){},"0bfb":function(t,e,i){"use strict";var s=i("cb7c");t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,i){"use strict";i("b0c5");var s=i("2aba"),n=i("32e9"),r=i("79e5"),o=i("be13"),a=i("2b4c"),l=i("520a"),c=a("species"),u=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var f=a(t),p=!r(function(){var e={};return e[f]=function(){return 7},7!=""[t](e)}),d=p?!r(function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[c]=function(){return i}),i[f](""),!e}):void 0;if(!p||!d||"replace"===t&&!u||"split"===t&&!h){var m=/./[f],v=i(o,f,""[t],function(t,e,i,s,n){return e.exec===l?p&&!n?{done:!0,value:m.call(e,i,s)}:{done:!0,value:t.call(i,e,s)}:{done:!1}}),g=v[0],b=v[1];s(String.prototype,t,g),n(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"28a5":function(t,e,i){"use strict";var s=i("aae3"),n=i("cb7c"),r=i("ebd6"),o=i("0390"),a=i("9def"),l=i("5f1b"),c=i("520a"),u=i("79e5"),h=Math.min,f=[].push,p="split",d="length",m="lastIndex",v=4294967295,g=!u(function(){RegExp(v,"y")});i("214f")("split",2,function(t,e,i,u){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[d]||2!="ab"[p](/(?:ab)*/)[d]||4!="."[p](/(.?)(.?)/)[d]||"."[p](/()()/)[d]>1||""[p](/.?/)[d]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!s(t))return i.call(n,t,e);var r,o,a,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,p=void 0===e?v:e>>>0,g=new RegExp(t.source,u+"g");while(r=c.call(g,n)){if(o=g[m],o>h&&(l.push(n.slice(h,r.index)),r[d]>1&&r.index<n[d]&&f.apply(l,r.slice(1)),a=r[0][d],h=o,l[d]>=p))break;g[m]===r.index&&g[m]++}return h===n[d]?!a&&g.test("")||l.push(""):l.push(n.slice(h)),l[d]>p?l.slice(0,p):l}:"0"[p](void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,s){var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n,s):b.call(String(n),i,s)},function(t,e){var s=u(b,t,this,e,b!==i);if(s.done)return s.value;var c=n(t),f=String(this),p=r(c,RegExp),d=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),x=new p(g?c:"^(?:"+c.source+")",m),L=void 0===e?v:e>>>0;if(0===L)return[];if(0===f.length)return null===l(x,f)?[f]:[];var y=0,_=0,w=[];while(_<f.length){x.lastIndex=g?_:0;var R,k=l(x,g?f:f.slice(_));if(null===k||(R=h(a(x.lastIndex+(g?0:_)),f.length))===y)_=o(f,_,d);else{if(w.push(f.slice(y,_)),w.length===L)return w;for(var E=1;E<=k.length-1;E++)if(w.push(k[E]),w.length===L)return w;_=y=R}}return w.push(f.slice(y)),w}]})},"3e3e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article"},[i("Recorder",{attrs:{speed:t.speed,unit:t.articleType,time:t.timeStr,percentage:t.percentage,isPause:t.isPause,pauseTime:t.pauseTime},on:{timePause:t.timePause}}),i("h1",[t._v(t._s(t.aiticleTitle))]),t._l(t.lineList,function(e,s){return i("div",{key:s},[i("div",{staticClass:"line"},t._l(e,function(e,n){return i("span",{key:n,class:[{Error:t.isError[s][n]},{Right:t.isRight[s][n]}]},[t._v(t._s(e))])}),0),i("el-input",{ref:"inputRef",refInFor:!0,staticClass:"ipt",attrs:{disabled:t.isDisabled[s]},on:{focus:function(e){return t.focus_line(s)}},nativeOn:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.key_delete(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.key_enter(e)}],"!paste":function(t){return t.preventDefault(),(!1)(t)}},model:{value:t.inputList[s],callback:function(e){t.$set(t.inputList,s,e)},expression:"inputList[i]"}})],1)}),i("SubmitDialog",{attrs:{visible:t.isDialogVisible,testInfo:t.testInfo}}),i("el-backtop",{attrs:{target:".article"}})],2)},n=[],r=(i("28a5"),i("6d7e")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"SubmitDialog"},[i("el-dialog",{attrs:{title:"确认信息",visible:t.visible,width:"500px","before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[i("el-row",[i("el-col",{attrs:{span:12}},[t._v("学校："+t._s(this.$store.state.school))]),i("el-col",{attrs:{span:12}},[t._v("班级："+t._s(this.$store.state.class))]),i("el-col",{attrs:{span:12}},[t._v("\n        速度："+t._s(t.testInfo.speed)+"\n        "),"Cn"===t.testInfo.type?i("span",[t._v("WPM")]):i("span",[t._v("KPM")])]),i("el-col",{attrs:{span:12}},[t._v("用时："+t._s(t.time))]),i("el-col",{attrs:{span:12}},[t._v("正确率："+t._s(t.testInfo.correctRate)+"%")])],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-row",[i("el-col",{attrs:{span:8,offset:2}},[i("el-input",{attrs:{placeholder:"请输入"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[i("template",{slot:"prepend"},[t._v("姓名")])],2),i("el-tag",{directives:[{name:"show",rawName:"v-show",value:t.isNameError,expression:"isNameError"}],staticStyle:{position:"absolute",left:"205px",top:"4px"},attrs:{type:"danger"}},[t._v("长度应在2到4个字符。")])],1),i("el-col",{attrs:{span:4,offset:10}},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提 交")])],1)],1)],1)],1)],1)},a=[],l=(i("7f7f"),{name:"SubmitDialog",props:["visible","testInfo"],data:function(){return{name:"",isNameError:!1}},computed:{time:function(){var t=Math.floor(this.testInfo.time/60),e=Math.floor(this.testInfo.time)-60*t;return t<=9&&(t="0"+t),e<=9&&(e="0"+e),t+"分"+e+"秒"}},methods:{handleSubmit:function(){if(this.name.length>=2&&this.name.length<=4){var t;this.isNameError=!1,t=1==this.$store.state.isPractice?new URLSearchParams({title:this.$store.state.article.title,stuName:this.name,speed:this.testInfo.speed,correctRate:this.testInfo.correctRate}):new URLSearchParams({testID:this.$store.state.testID,stuName:this.name,speed:this.testInfo.speed,correctRate:this.testInfo.correctRate});var e=this;axios({url:"/post_testResult/",method:"post",data:t,responseType:"text"}).then(function(t){e.$store.state.isPractice?e.$router.push("articleList"):e.$router.push("test")}).catch(function(t){console.log(error)})}else this.isNameError=!0},handleClose:function(){var t=this;this.$confirm("确认放弃提交？").then(function(e){t.$router.push("test")}).catch(function(t){})}}}),c=l,u=i("2877"),h=Object(u["a"])(c,o,a,!1,null,"2428dc3c",null),f=h.exports,p={name:"Article",data:function(){return{aiticleTitle:this.$store.state.article["title"],article:this.$store.state.article["content"],articleType:this.$store.state.article["type"],lineList:[""],inputList:[],isError:[[]],isRight:[[]],isDisabled:[!1],focusedLine:0,isDialogVisible:!1,isPause:!1,pauseTime:3,time:0,timeStr:"",percentage:0,clock:"",correctRate:0}},computed:{totalTime:function(){return 60*this.$store.state.totalTestTime},speed:function(){return parseInt(this.typedWordNum/(this.totalTime-this.time)*60)},totalWordNum:function(){for(var t=0,e=0;e<this.lineList.length;e++)t+=this.lineList[e].length;return t},typedWordNum:function(){for(var t=0,e=0;e<this.inputList.length;e++)t+=this.inputList[e].length;return t},testInfo:function(){return{speed:this.speed,time:this.totalTime-this.time,percentage:this.percentage,correctRate:this.correctRate,type:this.$store.state.article["type"]}}},components:{Recorder:r["a"],SubmitDialog:f},created:function(){""==this.$store.state.article["title"]&&this.$router.push("/")},mounted:function(){if(document.oncontextmenu=new Function("event.returnValue=false"),document.onselectstart=new Function("event.returnValue=false"),"En"==this.articleType)for(var t=Math.floor(document.getElementsByClassName("article")[0].clientWidth/12.5),e=0,i=this.article.split("\r\n"),s=0;s<i.length;s++){for(var n=i[s].trim().split(" "),r=0;r<n.length;r++)this.lineList[e].length+n[r].length<=t?0==this.lineList[e].length?this.lineList[e]+=n[r]:this.lineList[e]+=" "+n[r]:(e++,this.lineList.push(n[r]));s!=i.length-1&&(e++,this.lineList.push(""))}else{t=Math.floor(document.getElementsByClassName("article")[0].clientWidth/25-2),s=0,e=0;while(s<this.article.length)"\n"==this.article[s]&&this.lineList[e].length?(this.lineList[e]=this.lineList[e].trim(),this.lineList.push(""),e++):"\n"!=this.article[s]&&(this.lineList[e]+=this.article[s],this.lineList[e].length==t&&(this.lineList[e]=this.lineList[e].trim(),this.lineList.push(""),e++)),s++}for(s=0;s<this.lineList.length;s++){this.inputList.push(""),this.isDisabled.push(!0),this.isError.push([]),this.isRight.push([]);for(r=0;r<this.lineList[s].length;r++)this.isError[s].push(!1),this.isRight[s].push(!1)}this.$refs.inputRef[this.focusedLine].focus(),this.countDown(!0)},methods:{focus_line:function(t){this.focusedLine=t},key_delete:function(){this.focusedLine-1>=0&&0==this.inputList[this.focusedLine].length&&this.$refs.inputRef[this.focusedLine-1].focus()},key_enter:function(){var t=this.focusedLine;this.inputList[t]==this.lineList[t]&&this.$refs.inputRef[this.focusedLine+1].focus()},countDown:function(t){var e=this;t&&(this.time=this.totalTime),this.clock=setInterval(function(){var t=0,i=0;e.time>0?(t=Math.floor(e.time/60),i=Math.floor(e.time)-60*t,e.time--):e.confirmInfo(!1),t<=9&&(t="0"+t),i<=9&&(i="0"+i),e.timeStr=t+"分"+i+"秒"},1e3)},timePause:function(){var t=this;if(this.pauseTime>0)if(this.isPause=!this.isPause,this.isPause){clearInterval(this.clock);var e=0;while(e<this.isDisabled.length&&0==this.isDisabled[e])this.isDisabled[e]=!0,e++}else{e=0;this.pauseTime--;while(e<this.isDisabled.length&&""!=this.inputList[e])this.isDisabled[e]=!1,e++;this.isDisabled[0]=!1,this.countDown(!1),this.$nextTick(function(){t.$refs.inputRef[t.focusedLine].focus()})}},confirmInfo:function(t){if(this.$refs.inputRef[this.focusedLine].blur(),clearInterval(this.clock),!1===t){for(var e=0,i=0,s=0;s<this.inputList.length;s++)for(var n=0;n<this.inputList[s].length;n++)this.inputList[s][n]===this.lineList[s][n]&&e++,i++;this.correctRate=0!=i?Math.floor(e/i*1e3)/10:0}else this.correctRate=100;this.isDialogVisible=!0}},watch:{inputList:function(t,e){var i=this;this.percentage=Math.floor(this.typedWordNum/this.totalWordNum*1e3)/10;for(var s=this.focusedLine,n=0;n<this.lineList[s].length;n++)n<e[s].length?e[s][n]===this.lineList[s][n]?(this.isError[s][n]=!1,this.isRight[s][n]=!0):(this.isError[s][n]=!0,this.isRight[s][n]=!1):(this.isError[s][n]=!1,this.isRight[s][n]=!1);if(e[s].length===this.lineList[s].length){this.focusedLine+1!==e.length&&(this.focusedLine++,this.isDisabled[this.focusedLine]=!1,this.$nextTick(function(){i.$refs.inputRef[i.focusedLine].focus()}));var r=!0;for(n=0;n<this.lineList.length;n++)if(this.lineList[n]!==this.inputList[n]){r=!1;break}r&&this.confirmInfo(!0)}}},destroyed:function(){document.oncontextmenu=new Function("event.returnValue=true"),document.onselectstart=new Function("event.returnValue=true")}},d=p,m=(i("4a53"),Object(u["a"])(d,s,n,!1,null,"4affd432",null));e["default"]=m.exports},"4a53":function(t,e,i){"use strict";var s=i("eadb"),n=i.n(s);n.a},"520a":function(t,e,i){"use strict";var s=i("0bfb"),n=RegExp.prototype.exec,r=String.prototype.replace,o=n,a="lastIndex",l=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t[a]||0!==e[a]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(o=function(t){var e,i,o,u,h=this;return c&&(i=new RegExp("^"+h.source+"$(?!\\s)",s.call(h))),l&&(e=h[a]),o=n.call(h,t),l&&o&&(h[a]=h.global?o.index+o[0].length:e),c&&o&&o.length>1&&r.call(o[0],i,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)}),o}),t.exports=o},"5f1b":function(t,e,i){"use strict";var s=i("23c6"),n=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"===typeof i){var r=i.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==s(t))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"6d7e":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{fixedClass:t.isFixed}},[i("el-card",{staticClass:"info",attrs:{shadow:"always","body-style":{padding:"0 10px"}}},[i("el-row",[i("el-col",{attrs:{span:6}},["Cn"===t.unit?i("el-tooltip",{attrs:{effect:"dark",content:"Words Per Minute",placement:"bottom"}},[i("el-button",[t._v("速度")]),i("span",[t._v("速度："+t._s(t.speed)+" WPM(字/分)")])],1):i("el-tooltip",{attrs:{effect:"dark",content:"Keystrokes Per Minute",placement:"bottom"}},[i("el-button",[t._v("速度")]),i("span",[t._v("速度："+t._s(t.speed)+" KPM(键/分)")])],1)],1),i("el-col",{attrs:{span:6}},[i("span",[t._v("时间："+t._s(t.time))])]),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.timePause()}}},[t._v(t._s(this.isPause?"开始":"暂停"))]),i("span",[t._v(" 还可以暂停"+t._s(t.pauseTime)+"次")])],1),i("el-col",{attrs:{span:6}},[i("el-progress",{attrs:{"text-inside":!0,"stroke-width":21,percentage:t.percentage}})],1)],1)],1)],1)},n=[],r={name:"Recorder",props:["speed","unit","time","percentage","isPause","pauseTime"],data:function(){return{isFixed:!1}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},methods:{handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,e=document.querySelector(".info").offsetTop;this.isFixed=t>e},timePause:function(){this.$emit("timePause")}},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},o=r,a=(i("96d2"),i("2877")),l=Object(a["a"])(o,s,n,!1,null,"13c008d6",null);e["a"]=l.exports},"96d2":function(t,e,i){"use strict";var s=i("0a6e"),n=i.n(s);n.a},aae3:function(t,e,i){var s=i("d3f4"),n=i("2d95"),r=i("2b4c")("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==n(t))}},b0c5:function(t,e,i){"use strict";var s=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:s!==/./.exec},{exec:s})},eadb:function(t,e,i){}}]);
//# sourceMappingURL=Article.47cdf445.js.map